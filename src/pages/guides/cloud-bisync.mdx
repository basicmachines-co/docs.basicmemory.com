---
layout: '@/layouts/DocsLayout.astro'
title: 'Basic Memory Cloud'
description: 'Cloud authentication, setup, and mount commands for Basic Memory Cloud'
icon: 'cloud'
---

import { Card, CardGroup, Info, Warning, Note, Tip, Accordion, AccordionItem, Steps, Step, CodeGroup, CodeTab } from '@/components'


Basic Memory Cloud provides hosted cloud sync for multi-device workflows. Currently in invite-only beta. Sign up for an invite
at the [Basic Memory](https://basicmemory.com) website.

<Info>
Cloud features require an active Basic Memory subscription. [Subscribe here](https://basicmemory.com/subscribe).
    There is also a command alias enabled, called `bm`.
</Info>

Basic Memory Cloud requires the latest version of the Basic Memory cli tools to be installed. See the install and upgrade
instructions on the <a href="/getting-started">Getting Started</a> page.

## Quick Start

<Steps>
  <Step title="Authenticate">
    ```bash
    bm cloud login
    ```
    Opens browser for OAuth 2.1 authentication, then displays an authorization code.

   <img src="/device-activation.png" alt="Device Activation" height="200"/>

    In the terminal, the same code will be displayed. Confirm the codes match and press the "Confirm" button
      on the web page.

    ```
     bm cloud login
    Initiating authentication...

    üîê Authentication Required

    To authenticate, please visit:
    https://eloquent-lotus-05.authkit.app/device

    And enter this code: XXX-XXX

    Or for one-click access, visit:
    https://eloquent-lotus-05.authkit.app/device?user_code=XXX-XXX

    Opening browser automatically...

    Waiting for you to complete authentication in your browser...
    ```

    After you login and confirm via the web browser, your auth token will be saved locally.
    ```
    ‚úÖ Successfully authenticated with Basic Memory Cloud!
    Verifying subscription access...
    ‚úì Cloud mode enabled
    All CLI commands now work against https://cloud.basicmemory.com
    ‚úì Tokens saved to /your/home/dir/.basic-memory/basic-memory-cloud.json
    ```

   After logging in to Basic Memory Cloud, the `basic-memory` cli will be set to cloud mode. All commands will connect
      to cloud endpoints. To return to local mode, logout of the cloud via `bm cloud logout`.

  </Step>


  <Step>
      Create a new project (creates on cloud when cloud mode is enabled):

    ```bash
    # In cloud mode - creates cloud project
    bm project add my-new-project

    # Create and set as default
    bm project add my-new-project --default
    ```

  </Step>

  <Step title="Upload files to a project">
    ```bash
    bm sync
    ```
    Syncs local files to database, then syncs local directory with cloud storage bidirectionally.
  </Step>
</Steps>

## Authentication

Basic Memory uses JWT-based cloud authentication with OAuth 2.1 and automatic subscription validation.

### Login to Cloud

Authenticate with Basic Memory Cloud:

```bash
bm cloud login
```

**What happens:**
1. Opens browser to OAuth authorization page
2. Handles PKCE challenge/response automatically
3. Validates active subscription status
4. Stores JWT token in `~/.basic-memory/cloud-auth.json`
5. Token automatically refreshed when needed

<Info>
**Important:** After `bm cloud login`, CLI tools access cloud endpoints instead of local MCP. Commands like `bm project list` show cloud projects, and `bm tool [name]` invokes tools in the cloud. Use the same CLI commands for both local and cloud projects.
</Info>

**If no subscription:**
```
Active subscription required
Subscribe at: https://basicmemory.com/subscribe
```

### Check Authentication Status

View current authentication and cloud status:

```bash
bm cloud status
```

**Output shows:**
- Authentication status (logged in/out)
- Subscription status (active/expired)
- Last sync time
- Cloud project count
- Tenant information
- Sync directory configuration

### Logout

Clear authentication session:

```bash
bm cloud logout
```

Removes `~/.basic-memory/cloud-auth.json` and clears cached credentials. All cloud commands will require re-authentication.

### Token Management

**Automatic refresh:**
- CLI automatically refreshes tokens as needed
- No manual intervention required

**Token storage:**
- Location: `~/.basic-memory/basic-memory-cloud.json`
- Permissions: 600 (user read/write only)
- Never commit this file to git

**Manual revocation:**
1. Run `bm cloud logout` to clear local token
2. Visit account settings to revoke all sessions

## Bidirectional Cloud Sync

Bidirectional sync keeps your local files and cloud storage synchronized using [rclone](https://rclone.org/) [bisync](https://rclone.org/bisync/).
Rclone is an open-source command-line tool with robust data integrity features including checksum verification and resumable transfers.

### One-Time Setup

Configure cloud sync (required once):

```bash
bm cloud setup

# Optional: Custom sync directory
bm cloud setup --dir ~/my-sync-folder
```

**Setup process:**
1. Checks for rclone (installs if missing)
2. Generates scoped S3 credentials from cloud API
3. Configures rclone remote in `~/.config/rclone/rclone.conf`
4. Creates local sync directory (default: `~/basic-memory-cloud-sync`)
5. Performs initial baseline sync with `--resync`

**Created files:**
- `~/.basic-memory/config.json` - Stores sync directory path
- `~/.config/rclone/rclone.conf` - Remote credentials (mode 600)
- `~/.basic-memory/bisync-state/{id}/` - Sync state tracking

### Sync Your Files

Run bidirectional sync:

```bash
# Basic sync (uses 'balanced' profile)
bm cloud bisync

# Use specific sync profile
bm cloud bisync --profile safe
bm cloud bisync --profile balanced
bm cloud bisync --profile fast

# Preview changes without applying
bm cloud bisync --dry-run

# Force resync (rebuild baseline)
bm cloud bisync --resync

# Verbose output
bm cloud bisync --verbose
```

**Recommended workflow:**
```bash
# Use standard sync command for everything
bm sync                    # Local sync + cloud sync
bm sync --watch            # Continuous sync every 60s
```

The `bm sync` command handles both local database sync and cloud bidirectional sync in one operation.

<Warning>
**Important:** Never run `bm sync --watch` on more than one device at a time. Running watch mode simultaneously on multiple devices can cause sync conflicts and potential data loss. Only enable watch mode on your primary device.
</Warning>

### Sync Profiles

Three profiles optimize for different use cases:

**safe profile** - Maximum data preservation
- Conflict resolution: Keep both versions
- Max deletes: 10 files
- Speed: Slower (more careful)
- Best for: Preserving all changes, manual conflict resolution
- Conflicts saved as `file.conflict1`, `file.conflict2`

**balanced profile** - Default, auto-resolve conflicts
- Conflict resolution: Use newer file
- Max deletes: 25 files
- Speed: Medium
- Best for: Most users, single-user workflows
- Automatically resolves conflicts to newer version

**fast profile** - Rapid iteration
- Conflict resolution: Use newer file
- Max deletes: 50 files
- Speed: Fastest
- Best for: Solo projects, rapid development
- Trust newer versions without confirmation

### Conflict Resolution

**With safe profile (manual resolution):**

```bash
bm cloud bisync --profile safe

# If conflicts detected:
# ‚Üí "Conflict detected: ideas.md"
# ‚Üí "Saved as: ideas.md.conflict1 and ideas.md.conflict2"
# ‚Üí "Please resolve manually"

# Find conflict files
find ~/basic-memory-cloud-sync -name "*.conflict*"

# Review differences
diff ideas.md.conflict1 ideas.md.conflict2

# Merge manually
vim ideas.md  # Merge changes
rm ideas.md.conflict*
```

**With balanced/fast profiles (automatic resolution):**

```bash
bm cloud bisync --profile balanced

# Conflicts resolved automatically:
# ‚Üí "Resolving conflict: using newer version"
# ‚Üí "Device B's version (10:05 AM) selected over Device A (10:00 AM)"
```

### Sync Directory Structure

**Default layout:**
```
~/basic-memory-cloud-sync/     # Configurable via --dir
‚îú‚îÄ‚îÄ project-a/                 # Auto-created local projects
‚îÇ   ‚îú‚îÄ‚îÄ notes/
‚îÇ   ‚îú‚îÄ‚îÄ ideas/
‚îÇ   ‚îî‚îÄ‚îÄ .bmignore              # Respected during sync
‚îú‚îÄ‚îÄ project-b/
‚îÇ   ‚îî‚îÄ‚îÄ documents/
‚îî‚îÄ‚îÄ .basic-memory/             # Metadata (ignored in sync)
```

**Important paths:**
- `~/basic-memory-cloud-sync/` - Default local sync directory
- `~/basic-memory-cloud/` - Mount point (DO NOT use for bisync)
- `~/.basic-memory/bisync-state/{id}/` - Sync state and history

<Warning>
Bisync and mount must use **different directories**. Never use the mount directory for bisync operations.
</Warning>

### File Filtering

Basic Memory respects `.bmignore` patterns (gitignore format):

**Default patterns** (`~/.basic-memory/.bmignore`):
```
.git
.DS_Store
node_modules
*.tmp
.env
__pycache__
.pytest_cache
.ruff_cache
.vscode
.idea
```

**How it works:**
1. `.bmignore` patterns converted to rclone filter format
2. Auto-regenerated when `.bmignore` changes
3. Stored as `~/.basic-memory/.bmignore.rclone`
4. Applied to all bisync operations

**Custom patterns:**

Edit `~/.basic-memory/.bmignore`:
```
# Your custom patterns
.git
*.log
temp/
*.backup
```

Next sync will use updated filters.

### Project Auto-Registration

Bisync automatically registers new local projects with cloud:

```bash
# Create new project locally
mkdir ~/basic-memory-cloud-sync/new-project
echo "# Hello" > ~/basic-memory-cloud-sync/new-project/README.md

# Next sync auto-creates on cloud
bm sync
# ‚Üí "Found 1 new local project, creating on cloud..."
# ‚Üí "‚úì Created project: new-project"
```

## Cloud Mount

Mount cloud storage as a local filesystem using [rclone mount](https://rclone.org/commands/rclone_mount/).

### Mount Cloud Storage

Mount your cloud bucket:

```bash
# Mount at default location (~/basic-memory-cloud)
bm cloud mount

# Mount with different profile
bm cloud mount --profile fast
```

**Mount process:**
1. Authenticates with cloud (uses stored JWT)
2. Generates scoped S3 credentials
3. Configures rclone remote
4. Mounts cloud bucket via FUSE
5. Files accessible at mount point

**Mount point structure:**
```
~/basic-memory-cloud/              # Default mount point
‚îú‚îÄ‚îÄ project-a/                     # Cloud projects as directories
‚îÇ   ‚îú‚îÄ‚îÄ notes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ meeting-notes.md
‚îÇ   ‚îî‚îÄ‚îÄ ideas/
‚îú‚îÄ‚îÄ project-b/
‚îÇ   ‚îî‚îÄ‚îÄ documents/
‚îî‚îÄ‚îÄ shared-notes/
```

### Unmount

Unmount cloud storage:

```bash
bm cloud unmount
```

**Unmount process:**
1. Flushes pending writes to cloud
2. Unmounts FUSE filesystem
3. Cleans up mount point directory

### Mount vs Bisync

| Feature | Mount | Bisync |
|---------|-------|--------|
| **Access** | Direct cloud access | Synced local copy |
| **Latency** | Network dependent | Instant (local files) |
| **Offline** | Requires connection | Works offline |
| **Storage** | No local storage | Uses local disk |
| **Obsidian** | Can't see file changes | Sees file changes on sync |
| **Use Case** | Quick access, browsing | Primary workflow, offline work |
| **Directory** | `~/basic-memory-cloud` | `~/basic-memory-cloud-sync` |

**Use mount for:**
- Quick file access and browsing
- Temporary access on other devices
- Read-only operations
- Low disk space situations

**Use bisync for:**
- Primary workflow
- Offline access needed
- Better performance
- Regular file operations
- Obsidian integration (required)

<Warning>
Mount directory (`~/basic-memory-cloud`) and bisync directory (`~/basic-memory-cloud-sync`) must be **different locations**.
</Warning>

## Usage Workflows

### Daily Multi-Device Workflow

**Morning start:**
```bash
# Start watch mode for automatic sync
bm sync --watch &

# Work in your sync directory
cd ~/basic-memory-cloud-sync/work-notes
vim ideas.md

# Changes auto-sync every 60s
```

**Other device:**
```bash
# Pull latest changes
bm sync
# ‚Üí "‚úì Sync completed - 3 files downloaded"

# Make changes
vim ~/basic-memory-cloud-sync/work-notes/meeting.md

# Sync back to cloud
bm sync
# ‚Üí "‚úì Sync completed - 1 file uploaded"
```

### Quick Access on Temporary Device

```bash
# Authenticate
bm cloud login

# Mount for quick access
bm cloud mount

# Browse and edit files
cd ~/basic-memory-cloud
vim project/notes.md

# Cleanup
bm cloud unmount
bm cloud logout
```

### Working with Obsidian

<Warning>
**Obsidian limitation:** Obsidian does not see file changes on FUSE-mounted folders. Use bidirectional sync instead for Obsidian workflows.
</Warning>

**Recommended approach (using bisync):**
```bash
# Set up bidirectional sync
bm cloud setup --dir ~/obsidian-vault

# Initial sync
bm sync

# Open Obsidian vault at sync directory (NOT mount point)
# Vault location: ~/obsidian-vault/my-project

# Work in Obsidian - changes are local files
# Sync periodically
bm sync

# Or enable automatic sync
bm sync --watch  # Syncs every 60s
```

**Why bisync works with Obsidian:**
- Obsidian sees local file changes
- File system events work correctly
- No FUSE limitations

### Adding Existing Notes to Cloud

Two methods to add your existing markdown files to Basic Memory Cloud:

**Method 1: Using Bidirectional Sync (Recommended)**

```bash
# Authenticate and set up sync
bm cloud login
bm cloud setup

# Copy existing notes into sync directory
cp -r ~/my-existing-notes/* ~/basic-memory-cloud-sync/my-project/

# Sync to cloud (auto-creates new project)
bm sync
# ‚Üí "Found 1 new local project, creating on cloud..."
# ‚Üí "‚úì Created project: my-project"
```

This method:
- Auto-registers new projects on cloud
- Provides bidirectional sync for ongoing work
- Works offline after initial setup
- Best for regular use

**Method 2: Using Mount**

```bash
# Authenticate and mount cloud storage
bm cloud login
bm cloud mount

# Copy files directly to cloud
mkdir -p ~/basic-memory-cloud/my-project
cp -r ~/my-existing-notes/* ~/basic-memory-cloud/my-project/

# Unmount when done
bm cloud unmount
```

This method:
- Immediate upload to cloud
- No local sync directory required
- Best for one-time uploads
- Note: Obsidian can't see file changes on mounted folders

**Creating projects explicitly:**

```bash
# Add existing directory as local project
bm project add my-project ~/my-existing-notes

# Then sync to cloud
bm cloud setup --dir ~/my-existing-notes
bm sync
```

## Troubleshooting

### "First bisync requires --resync"

**Problem:** Initial sync not established

```bash
$ bm cloud bisync
Error: First bisync requires --resync to establish baseline
```

**Solution:**
```bash
bm cloud bisync --resync
```

### "Cannot use mount directory for bisync"

**Problem:** Trying to use mounted directory for sync

**Solution:** Use different directories
```bash
# Correct configuration
MOUNT: ~/basic-memory-cloud
BISYNC: ~/basic-memory-cloud-sync
```

### Deletion Safety Limit

**Problem:** Too many files deleted

```bash
$ bm cloud bisync
Error: Deletion exceeds safety limit (26 > 25)
```

**Solution:**
```bash
# Preview deletions
bm cloud bisync --dry-run

# If intentional, use higher threshold profile
bm cloud bisync --profile fast  # max_delete=50

# Or rebuild baseline
bm cloud bisync --resync
```

### rclone Not Found

**Problem:** rclone not installed

**Solution:**
```bash
# Run setup again (auto-installs rclone)
bm cloud setup
```

### Mount Failed

**Problem:** Can't mount cloud storage

```bash
$ bm cloud mount
Error: mount failed: transport endpoint not connected
```

**Solutions:**
1. Check authentication: `bm cloud login`
2. Verify rclone installed: `which rclone`
3. Create mount point: `mkdir -p ~/basic-memory-cloud`
4. Ensure not already mounted: `bm cloud unmount`

### Directory Busy (Can't Unmount)

**Problem:** Mount point in use

```bash
$ bm cloud unmount
Error: device is busy
```

**Solutions:**
```bash
# Check what's using it
lsof | grep basic-memory-cloud

# Close applications using mount
# Navigate out of mount directory
cd ~

# Try unmount again
bm cloud unmount

# If still busy, use system unmount
umount -f ~/basic-memory-cloud  # macOS
fusermount -u ~/basic-memory-cloud  # Linux
```

### Subscription Expired

**Problem:** Cloud commands fail with subscription error

```bash
$ bm cloud bisync
Active subscription required
Subscribe at: https://basicmemory.com/subscribe
```

**Solution:** Renew subscription at provided URL

### Token Expired

**Automatic resolution:**
```bash
$ bm cloud status
Token expired, refreshing...
‚úì Authenticated
```

Tokens refresh automatically. If refresh fails, run `bm cloud login` again.

## Configuration

### Bisync Configuration

Edit `~/.basic-memory/config.json`:

```json
{
  "bisync_config": {
    "sync_dir": "~/basic-memory-cloud-sync",
    "default_profile": "balanced",
    "auto_sync_interval": 60
  }
}
```

### rclone Configuration

Located at `~/.config/rclone/rclone.conf`:

```ini
[basic-memory-{id}]
type = s3
provider = AWS
env_auth = false
access_key_id = AKIA...
secret_access_key = ***
region = us-east-1
endpoint = https://fly.storage.tigris.dev
```

<Warning>
This file contains credentials. Keep private (mode 600). Never commit to git.
</Warning>

## Platform-Specific Notes

### macOS

**Requirements:** macFUSE

```bash
# Install macFUSE
brew install --cask macfuse

# Mount
bm cloud mount

# Unmount
bm cloud unmount
# Or: umount ~/basic-memory-cloud
```

### Linux

**Requirements:** FUSE (usually pre-installed)

```bash
# Install FUSE if needed
sudo apt-get install fuse  # Debian/Ubuntu
sudo yum install fuse      # RHEL/CentOS

# Mount
bm cloud mount

# Unmount
bm cloud unmount
# Or: fusermount -u ~/basic-memory-cloud
```

### Windows

**Requirements:** WinFsp

```bash
# Install WinFsp from https://winfsp.dev/

# Mount (appears as drive letter)
bm cloud mount
dir Z:\
```

## Performance Tips

1. **Use balanced profile** - Best trade-off for most users
2. **Enable watch mode** - `bm sync --watch` for automatic sync
3. **Optimize .bmignore** - Exclude build artifacts and temporary files
4. **Batch changes** - Group related edits before manual sync
5. **Use fast profile** - For rapid iteration on solo projects
6. **Prefer bisync over mount** - Better performance for regular workflows

## Security

### Authentication
- JWT tokens with automatic expiration (1 hour)
- OAuth 2.1 with PKCE flow
- Credentials encrypted at rest
- File permissions: 600 (user read/write only)

### Data Transfer
- All traffic over HTTPS/TLS
- Checksums verify transfer integrity
- Scoped S3 credentials (tenant-isolated)
- No plain-text secrets stored

### Access Control
- Subscription-based access validation
- Per-project isolation
- Revocable tokens via logout
- .bmignore prevents syncing sensitive files

## Command Reference

```bash
# Authentication
bm cloud login                        # Authenticate with OAuth
bm cloud logout                       # Clear credentials
bm cloud status                       # View auth and sync status

# Setup
bm cloud setup                        # Setup bisync (recommended)
bm cloud setup --mount                # Setup mount instead
bm cloud setup --dir ~/sync           # Custom bisync directory

# Bidirectional Sync (Recommended)
bm sync                               # One-time sync (recommended)
bm sync --watch                       # Continuous sync every 60s
bm sync --watch --interval 30         # Continuous sync every 30s

# Advanced Bisync Commands
bm cloud bisync-setup                 # One-time bisync setup (same as setup)
bm cloud bisync                       # Manual sync (balanced profile)
bm cloud bisync --profile safe        # Manual conflict resolution
bm cloud bisync --profile fast        # Fast sync, auto-resolve
bm cloud bisync --dry-run             # Preview changes
bm cloud bisync --resync              # Rebuild baseline
bm cloud bisync --verbose             # Detailed sync output

# Cloud Mount
bm cloud mount                        # Mount cloud storage
bm cloud mount --profile fast         # Mount with fast profile
bm cloud unmount                      # Unmount storage

# Verification
bm cloud check                        # Integrity verification
bm cloud check --one-way              # Faster check (missing files only)
```

## Related Documentation

- [CLI Reference](/guides/cli-reference) - Complete CLI command reference
- [Getting Started](/getting-started) - Initial setup and configuration
- [MCP Tools Reference](/guides/mcp-tools-reference) - Multi-project workflows
- [What's New](/whats-new) - v0.15.0 release notes

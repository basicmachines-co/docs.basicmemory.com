---
layout: '@/layouts/DocsLayout.astro'
title: 'Cloud CLI Guide'
description: 'Cloud synchronization, authentication, and storage management with Basic Memory'
---

import { Card, CardGroup, Info, Warning, Note, Tip, Accordion, AccordionItem, Steps, Step } from '@/components'

<Warning>
Cloud features require an active subscription. Visit [basicmemory.com](https://basicmemory.com) for subscription options.
</Warning>

## Overview

Basic Memory cloud features provide:

- **Authentication**: JWT-based authentication with automatic token refresh
- **Bidirectional Sync**: rclone bisync for two-way synchronization
- **Cloud Mount**: Direct file access via FUSE mount
- **Integrity Verification**: Checksum validation and conflict detection

## Authentication

### Login

Authenticate with cloud service:

```bash
basic-memory cloud login
```

Opens browser for OAuth authentication. Credentials stored in `~/.basic-memory/cloud_auth.json`.

**Token Management:**
- JWT tokens with automatic refresh
- Session persists across CLI sessions
- Tokens expire after 24 hours of inactivity

### Logout

Clear credentials and end session:

```bash
basic-memory cloud logout
```

Removes `~/.basic-memory/cloud_auth.json` and revokes cloud access.

## Cloud Synchronization

### Sync Command

Bidirectional synchronization using rclone bisync:

```bash
# Sync current/default project
basic-memory cloud sync

# Sync specific project
basic-memory --project=work cloud sync
```

**Sync Behavior:**
- First run performs initial sync
- Subsequent runs detect and sync changes
- Conflict detection with resolution prompts
- Respects .gitignore patterns

**Conflict Resolution:**

When conflicts occur, sync presents options:
1. Keep local version
2. Keep remote version
3. Keep both (creates conflict copies)

### Sync Workflow

<Steps>
<Step>
**Initial Sync**

First sync establishes baseline:
```bash
basic-memory cloud sync
```
All local files uploaded to cloud.
</Step>

<Step>
**Regular Sync**

Run sync to detect changes:
```bash
basic-memory cloud sync
```
Detects local and remote changes, syncs bidirectionally.
</Step>

<Step>
**Conflict Handling**

If conflicts detected:
```
Conflict detected: notes/meeting.md
Local: modified 2025-10-04 10:30
Remote: modified 2025-10-04 10:35

Choose resolution:
1. Keep local
2. Keep remote
3. Keep both
```
</Step>
</Steps>

## Cloud Mount

### Mount Command

Mount cloud storage as local filesystem:

```bash
# Mount with default (balanced) profile
basic-memory cloud mount

# Mount with specific profile
basic-memory cloud mount --profile fast
basic-memory cloud mount --profile balanced
basic-memory cloud mount --profile safe
```

### Performance Profiles

**Fast Profile** (5s cache):
- Optimized for speed
- 5-second cache timeout
- Best for: Active editing sessions
- Trade-off: May miss rapid remote changes

**Balanced Profile** (10-15s cache, default):
- Balance between speed and safety
- 10-15 second cache timeout
- Best for: General use
- Trade-off: Moderate sync latency

**Safe Profile** (15s+ cache):
- Optimized for data integrity
- 15+ second cache timeout
- Best for: Critical data, slow connections
- Trade-off: Higher latency on changes

### Unmount

Unmount cloud storage:

```bash
basic-memory cloud unmount
```

Cleanly disconnects mount point and flushes pending changes.

## Integrity Verification

### Check Command

Verify cloud storage integrity:

```bash
basic-memory cloud check
```

**Verification Steps:**
1. Compare local and remote file listings
2. Validate checksums for all files
3. Report missing or corrupted files
4. Identify sync conflicts

**Output:**
```
Checking cloud integrity...
✓ 1,234 files verified
✗ 2 files missing from cloud
✗ 1 checksum mismatch

Missing files:
  - notes/draft.md
  - projects/archived.md

Checksum mismatch:
  - notes/important.md (local: abc123, remote: def456)
```

## Configuration

### rclone Setup

Cloud commands require rclone. Install via:

**macOS:**
```bash
brew install rclone
```

**Linux:**
```bash
curl https://rclone.org/install.sh | sudo bash
```

**Windows:**
```bash
choco install rclone
```

**Verification:**
```bash
rclone version
```

### Cloud Configuration

Cloud settings stored in `~/.basic-memory/config.json`:

```json
{
  "cloud": {
    "enabled": true,
    "remote_name": "basicmemory",
    "mount_profile": "balanced"
  }
}
```

## Troubleshooting

### Authentication Issues

**Problem**: Login fails or returns 401 error

**Solution**:
```bash
# Clear credentials and re-login
basic-memory cloud logout
basic-memory cloud login
```

### Sync Conflicts

**Problem**: Repeated sync conflicts

**Solution**:
1. Ensure single editing location during sync
2. Use `cloud check` to verify integrity
3. Resolve conflicts manually, then re-sync

### Mount Issues

**Problem**: Mount command fails

**Solution**:
```bash
# Verify rclone installed
rclone version

# Check existing mounts
mount | grep basicmemory

# Force unmount if stuck
basic-memory cloud unmount
fusermount -u ~/basic-memory  # Linux
umount ~/basic-memory          # macOS
```

### Performance Issues

**Problem**: Slow sync or mount operations

**Solution**:
1. Use faster mount profile: `--profile fast`
2. Check network connection
3. Verify .gitignore excludes large files
4. Consider partial sync of specific folders

## Best Practices

### Sync Frequency

- **Active editing**: Sync after each work session
- **Collaboration**: Sync before and after editing
- **Backup**: Daily sync for safety

### File Management

- Use .gitignore to exclude temporary files
- Avoid syncing large binary files (videos, databases)
- Keep project size under 1GB for optimal performance

### Conflict Prevention

- Sync before starting work
- Single editing location per project
- Use mount for real-time collaboration
- Regular integrity checks

## Security

### Authentication

- JWT tokens with automatic expiration
- OAuth 2.1 with PKCE flow
- Credentials encrypted at rest

### Data Transfer

- TLS 1.3 for all connections
- Checksums verify transfer integrity
- No intermediate storage during transfer

### Access Control

- Subscription-based access
- Per-project isolation
- Revocable tokens via logout

## Command Reference

```bash
# Authentication
basic-memory cloud login              # Authenticate
basic-memory cloud logout             # Clear credentials

# Synchronization
basic-memory cloud sync               # Bidirectional sync
basic-memory cloud check              # Integrity check

# Mount/Unmount
basic-memory cloud mount              # Mount (balanced profile)
basic-memory cloud mount --profile fast    # Fast profile
basic-memory cloud mount --profile safe    # Safe profile
basic-memory cloud unmount            # Unmount storage

# Project-specific
basic-memory --project=work cloud sync     # Sync specific project
basic-memory --project=work cloud mount    # Mount specific project
```

## Related Documentation

- [CLI Reference](/guides/cli-reference) - Complete CLI command reference
- [Getting Started](/getting-started) - Initial setup and configuration
- [Project Management](/guides/mcp-tools-reference#project-management-tools) - Multi-project workflows
